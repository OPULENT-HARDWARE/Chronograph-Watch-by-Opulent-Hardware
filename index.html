<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chronograph — Clean Dial</title>
  <style>
    :root{
      --bg:#0b0f14;
      --bezel:#0a0d10;
      --metal:#1b222b;
      --accent:#a3ef2f;
      --text:#e8eef5;
      --muted:#9fb2c9;
      --shadow:rgba(0,0,0,.55);
      --hand-lume:rgba(163,239,47,0.12);
    }
    *{box-sizing:border-box}

    /* FORCE TRANSPARENT PAGE for iframe hosts */
    html,body{
      height:100%;
      margin:0;
      background:rgba(0,0,0,0) !important;
      background-color:transparent !important;
      overflow:hidden;
    }

    body{
      display:grid;
      place-items:center;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,"Helvetica Neue",Arial;
    }

    .wrap{
      width:min(92vmin,820px);
      aspect-ratio:1/1;
      position:relative;
    }

    .bezel{
      position:absolute;inset:0;border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #1a232e, #0b0f14 60%),
                 conic-gradient(from 0deg, #12161d, #0c1016 30deg, #0d1118 120deg, #12161d 240deg, #0c1016 300deg, #12161d 360deg);
      box-shadow:0 20px 60px var(--shadow), inset 0 4px 14px rgba(255,255,255,.06), inset 0 -6px 20px rgba(0,0,0,.7);
    }

    svg{
      position:absolute;inset:2.6%;width:94.8%;height:94.8%;display:block;border-radius:50%;
      background:radial-gradient(circle at 50% 46%, #0c1117, #080c12 62%, #060a0f 100%);
      box-shadow:inset 0 0 60px rgba(0,0,0,.65), inset 0 0 160px rgba(0,0,0,.5);
    }

    .glare{
      position:absolute;inset:0;border-radius:50%;pointer-events:none;
      background:radial-gradient(120% 60% at 10% 0%, rgba(255,255,255,.14), transparent 42%),
                 radial-gradient(90% 70% at 100% 10%, rgba(255,255,255,.06), transparent 38%),
                 radial-gradient(60% 40% at 70% 90%, rgba(255,255,255,.03), transparent 50%);
      mix-blend-mode:screen;
    }

    .pusher{
      position:absolute;top:22%;right:-3.6%;width:5%;height:9%;border-radius:16px;background:linear-gradient(#2a313a,#141a22);
      box-shadow:0 6px 14px var(--shadow), inset 0 1px 0 rgba(255,255,255,.08);
      cursor:pointer;display:grid;place-items:center;color:var(--muted);font-size:.7rem;user-select:none
    }
    .p-top{top:22%}
    .p-mid{top:45.5%}
    .p-btm{top:69%}

    .controls{
      position:absolute;left:50%;bottom:-64px;transform:translateX(-50%);
      display:flex;gap:.6rem;flex-wrap:wrap;justify-content:center
    }
    .btn{
      appearance:none;border:0;border-radius:999px;padding:.6rem 1rem;background:#141a22;color:#c8d6e5;cursor:pointer;
      box-shadow:0 6px 16px var(--shadow), inset 0 1px 0 rgba(255,255,255,.06);font-weight:600
    }
    .btn:active{transform:translateY(1px)}

    .laps{
      position:fixed;
      right:16px;
      top:16px;
      width:240px;
      max-height:calc(100dvh - 32px);
      overflow:auto;
      padding:8px 0;
      z-index:50;
    }
    .laps:empty{display:none;}
    .lap{
      display:flex;justify-content:space-between;gap:.5rem;padding:.35rem .6rem;margin:.25rem 0;background:#0f141b;border-radius:10px;color:#dfe9f5;
      font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,"Liberation Mono","Courier New",monospace; font-size:.82rem; box-shadow:0 6px 14px var(--shadow)
    }
    .lap small{color:var(--muted)}

    @media (max-width:980px){
      .laps{position:static;width:100%;display:flex;flex-direction:column;margin-top:14px;max-height:none;padding:8px 0;}
    }

    .hint{
      position:absolute;left:50%;bottom:-94px;transform:translateX(-50%);color:#7f93ad;font-size:.75rem;opacity:.9
    }

    .color-menu{
      position:fixed; top:16px; left:16px;
      background:rgba(15,20,27,.84);
      border-radius:10px;
      padding:6px 10px;
      display:flex;
      align-items:center;
      gap:.5rem;
      color:#c8d6e5;
      font-size:.82rem;
      box-shadow:0 4px 12px rgba(0,0,0,.5);
      z-index:999;
      backdrop-filter: blur(6px);
    }
    .color-menu input[type="color"]{
      width:28px;height:28px;border:none;border-radius:50%;cursor:pointer;padding:0;
    }

    .time-hand-stroke{
      stroke-linecap:round;
      stroke-linejoin:round;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,.6));
    }
  </style>
</head>
<body>
  <!-- accent color -->
  <div class="color-menu">
    <label for="accentPicker">Accent</label>
    <input type="color" id="accentPicker" value="#a3ef2f">
  </div>

  <div class="wrap" aria-label="Chronograph watch">
    <div class="bezel"></div>

    <!-- pushers -->
    <div class="pusher p-top" id="btn-start" title="Start/Stop (Space)" role="button" tabindex="0">▶︎</div>
    <div class="pusher p-mid" id="btn-lap" title="Lap (L)" role="button" tabindex="0">LAP</div>
    <div class="pusher p-btm" id="btn-reset" title="Reset (R)" role="button" tabindex="0">↺</div>

    <svg viewBox="0 0 400 400">
      <defs>
        <filter id="drop">
          <feGaussianBlur in="SourceAlpha" stdDeviation="1.2"/>
          <feOffset dx="0" dy="1"/>
          <feComponentTransfer>
            <feFuncA type="linear" slope="0.35"/>
          </feComponentTransfer>
          <feMerge>
            <feMergeNode/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
        <filter id="chronoDrop">
          <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.45"/>
        </filter>
      </defs>

      <!-- dial rings + ticks -->
      <g id="marks">
        <circle cx="200" cy="200" r="185" fill="none" stroke="#10161e" stroke-width="14"/>
        <circle cx="200" cy="200" r="176" fill="none" stroke="#0e131a" stroke-width="6"/>
        <g id="tickSet"></g>
      </g>

      <!-- brand under hands -->
      <g id="brand-text" transform="translate(200,120)" opacity=".9">
        <text x="0" y="6" text-anchor="middle" fill="#dfe9f6" font-size="12" letter-spacing="3">OPULENT HARDWARE</text>
      </g>

      <!-- subdials -->
      <g id="subdials" filter="url(#drop)">
        <g id="sd-min" transform="translate(285,200)">
          <circle r="56" fill="#0e141c" stroke="#1a232e" stroke-width="3"/>
          <g id="sd-min-marks"></g>
          <g id="sd-min-hand" transform="rotate(0)">
            <line x1="0" y1="0" x2="0" y2="-38" stroke="#cfe2ff" stroke-width="3" stroke-linecap="round"/>
            <circle r="4" fill="#cfe2ff"/>
          </g>
          <text x="0" y="20" text-anchor="middle" fill="#9fb2c9" font-size="8" letter-spacing="2">MIN</text>
        </g>

        <g id="sd-hr" transform="translate(200,285)">
          <circle r="56" fill="#0e141c" stroke="#1a232e" stroke-width="3"/>
          <g id="sd-hr-marks"></g>
          <g id="sd-hr-hand" transform="rotate(0)">
            <line x1="0" y1="0" x2="0" y2="-38" stroke="#cfe2ff" stroke-width="3" stroke-linecap="round"/>
            <circle r="4" fill="#cfe2ff"/>
          </g>
          <text x="0" y="20" text-anchor="middle" fill="#9fb2c9" font-size="8" letter-spacing="2">HOUR</text>
        </g>

        <g id="sd-sec" transform="translate(115,200)">
          <circle r="56" fill="#0e141c" stroke="#1a232e" stroke-width="3"/>
          <g id="sd-sec-marks"></g>
          <g id="sd-sec-hand" transform="rotate(0)">
            <line x1="0" y1="6" x2="0" y2="-40" stroke="#9ad0ff" stroke-width="2.5" stroke-linecap="round"/>
            <circle r="4" fill="#9ad0ff"/>
          </g>
          <text x="0" y="20" text-anchor="middle" fill="#9fb2c9" font-size="8" letter-spacing="2">SEC</text>
        </g>
      </g>

      <!-- hour markers removed -->
      <g id="hours"></g>

      <!-- system time hands -->
      <g id="time-hands" transform="translate(200,200)">
        <g id="clock-hour-rot" transform="rotate(0)">
          <path d="M-6 10 L-3 10 L0 -90 L3 -90 L6 10 Z" fill="#dfe9f5" class="time-hand-stroke"/>
          <path d="M-2 10 L-1 10 L0 -82 L1 -82 L2 10 Z" fill="var(--hand-lume)"/>
        </g>
        <g id="clock-min-rot" transform="rotate(0)">
          <path d="M-4 12 L-2 12 L0 -160 L2 -160 L4 12 Z" fill="#e8f1ff" class="time-hand-stroke"/>
          <path d="M-1.5 12 L-0.7 12 L0 -150 L0.7 -150 L1.5 12 Z" fill="var(--hand-lume)"/>
        </g>
      </g>

      <!-- chronograph sweep -->
      <g id="chrono-hand" transform="translate(200,200)">
        <g id="chrono-rot" transform="rotate(0)" filter="url(#chronoDrop)">
          <line x1="0" y1="8" x2="0" y2="-160"
                stroke="var(--accent)" stroke-width="3.6" stroke-linecap="round"/>
          <circle r="4.6" fill="var(--accent)"/>
        </g>
      </g>

      <!-- center pinion -->
      <circle cx="200" cy="200" r="6.5" fill="#cfe2ff"/>
    </svg>

    <div class="glare"></div>

    <div class="controls" aria-label="Controls">
      <button class="btn" id="btnStartStop" aria-pressed="false">Start / Stop (Space)</button>
      <button class="btn" id="btnLap">Lap (L)</button>
      <button class="btn" id="btnReset">Reset (R)</button>
    </div>

    <div class="hint">Keyboard: Space = start/stop • L = lap • R = reset</div>
  </div>

  <div class="laps" id="laps" aria-live="polite" aria-label="Lap times"></div>

  <script>
    const rad = a => a * (Math.PI/180);

    const tickSet = document.getElementById('tickSet');
    for(let i=0;i<60;i++){
      const ang = rad(i*6);
      const rOuter = 176, rInner = i%5===0? 165 : 170;
      const x1 = 200 + rOuter * Math.sin(ang);
      const y1 = 200 - rOuter * Math.cos(ang);
      const x2 = 200 + rInner * Math.sin(ang);
      const y2 = 200 - rInner * Math.cos(ang);
      const line = document.createElementNS('http://www.w3.org/2000/svg','line');
      line.setAttribute('x1',x1); line.setAttribute('y1',y1);
      line.setAttribute('x2',x2); line.setAttribute('y2',y2);
      line.setAttribute('stroke', i%5===0? '#cfe2ff':'#6f8198');
      line.setAttribute('stroke-width', i%5===0? '3':'1.2');
      line.setAttribute('stroke-linecap','round');
      tickSet.appendChild(line);
    }

    function buildSubMarks(groupId, big=5, small=1, steps=60){
      const g = document.getElementById(groupId);
      for(let i=0;i<steps;i++){
        const a = rad(i*(360/steps));
        const rOut = 48, rIn = i%(steps/12)===0? 38: 43;
        const x1 = Math.sin(a)*rOut, y1 = -Math.cos(a)*rOut;
        const x2 = Math.sin(a)*rIn,  y2 = -Math.cos(a)*rIn;
        const line = document.createElementNS('http://www.w3.org/2000/svg','line');
        line.setAttribute('x1',x1); line.setAttribute('y1',y1);
        line.setAttribute('x2',x2); line.setAttribute('y2',y2);
        line.setAttribute('stroke', (i%(steps/12)===0)? '#cfe2ff':'#7b8da3');
        line.setAttribute('stroke-width', (i%(steps/12)===0)? big: small);
        line.setAttribute('stroke-linecap','round');
        g.appendChild(line);
      }
    }
    buildSubMarks('sd-min-marks', 2.4, 1.2, 60);
    buildSubMarks('sd-hr-marks', 2.4, 1.2, 12);
    buildSubMarks('sd-sec-marks', 2.0, 1.0, 60);

    let running = false;
    let rafId = null;
    let startTime = 0;
    let accumulated = 0;

    const chronoRot = document.getElementById('chrono-rot');
    const minHandGrp = document.getElementById('sd-min-hand');
    const hrHandGrp  = document.getElementById('sd-hr-hand');
    const secHandGrp = document.getElementById('sd-sec-hand');

    function setRotate(el, deg){ el.setAttribute('transform', `rotate(${deg})`); }

    function formatTime(ms){
      const total = Math.floor(ms);
      const h = Math.floor(total/3_600_000);
      const m = Math.floor((total%3_600_000)/60_000);
      const s = Math.floor((total%60_000)/1000);
      const cs = Math.floor((total%1000)/10);
      return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}.${String(cs).padStart(2,'0')}`;
    }

    const lapsEl = document.getElementById('laps');
    let lapCount = 0;
    let lastLapTime = 0;
    function addLap(ms){
      lapCount++;
      const delta = ms - lastLapTime;
      lastLapTime = ms;
      const row = document.createElement('div');
      row.className = 'lap';
      row.innerHTML = `<small>#${lapCount}</small><span>${formatTime(ms)} <small style="opacity:.7">(+${formatTime(delta)})</small></span>`;
      lapsEl.prepend(row);
    }

    function animate(){
      const now = performance.now();
      const elapsed = accumulated + (now - startTime);

      const secAngle = (elapsed % 60_000) / 60_000 * 360;
      setRotate(chronoRot, secAngle);

      const minAngle = (elapsed / 60_000) % 60 / 60 * 360;
      setRotate(minHandGrp, minAngle);

      const hrAngle = (elapsed / 3_600_000) % 12 / 12 * 360;
      setRotate(hrHandGrp, hrAngle);

      const small = (elapsed % 1000) / 1000 * 360;
      setRotate(secHandGrp, small);

      rafId = requestAnimationFrame(animate);
    }

    function start(){
      if(running) return;
      running = true;
      startTime = performance.now();
      if(rafId == null) rafId = requestAnimationFrame(animate);
      document.getElementById('btnStartStop').setAttribute('aria-pressed','true');
    }
    function stop(){
      if(!running) return;
      running = false;
      cancelAnimationFrame(rafId);
      rafId = null;
      accumulated += performance.now() - startTime;
      document.getElementById('btnStartStop').setAttribute('aria-pressed','false');
    }
    function reset(){
      running = false;
      cancelAnimationFrame(rafId);
      rafId = null;
      accumulated = 0; startTime = 0;
      setRotate(chronoRot, 0);
      setRotate(minHandGrp, 0);
      setRotate(hrHandGrp, 0);
      setRotate(secHandGrp, 0);
      lapsEl.innerHTML = '';
      lapCount = 0;
      lastLapTime = 0;
      document.getElementById('btnStartStop').setAttribute('aria-pressed','false');
    }

    const btnStartStop = document.getElementById('btnStartStop');
    const btnLap = document.getElementById('btnLap');
    const btnReset = document.getElementById('btnReset');

    function toggle(){ running? stop(): start(); }

    btnStartStop.addEventListener('click', toggle);
    btnLap.addEventListener('click', ()=>{ if(accumulated>0 || running){ const now = running ? accumulated + (performance.now()-startTime) : accumulated; addLap(now); } });
    btnReset.addEventListener('click', reset);

    document.getElementById('btn-start').addEventListener('click', toggle);
    document.getElementById('btn-lap').addEventListener('click', ()=> btnLap.click());
    document.getElementById('btn-reset').addEventListener('click', reset);

    window.addEventListener('keydown', (e)=>{
      if(e.code==='Space'){ e.preventDefault(); toggle(); }
      if(e.key==='l' || e.key==='L'){ e.preventDefault(); btnLap.click(); }
      if(e.key==='r' || e.key==='R'){ e.preventDefault(); reset(); }
    });

    const hourGrp = document.getElementById('clock-hour-rot');
    const minGrp  = document.getElementById('clock-min-rot');

    function updateClock(){
      const now = new Date();
      const h = now.getHours() % 12;
      const m = now.getMinutes();
      const s = now.getSeconds();
      const ms = now.getMilliseconds();
      setRotate(minGrp, (m + s/60 + ms/60000) * 6);
      setRotate(hourGrp, (h + m/60 + s/3600) * 30);
      requestAnimationFrame(updateClock);
    }
    updateClock();

    const accentPicker = document.getElementById('accentPicker');
    const ACCENT_KEY = 'chronograph-accent';
    const saved = localStorage.getItem(ACCENT_KEY);
    if(saved){
      document.documentElement.style.setProperty('--accent', saved);
      accentPicker.value = saved;
    }
    accentPicker.addEventListener('input', e=>{
      document.documentElement.style.setProperty('--accent', e.target.value);
      localStorage.setItem(ACCENT_KEY, e.target.value);
    });
  </script>
</body>
</html>
